/* Workspaces.c generated by valac 0.56.18, the Vala compiler
 * generated from Workspaces.vala, do not modify */

#include <gtk/gtk.h>
#include <glib-object.h>
#include <astal-hyprland.h>
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>
#include <gio/gio.h>
#include <stdio.h>
#include <gdk/gdk.h>

#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define TYPE_WORKSPACES (workspaces_get_type ())
#define WORKSPACES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_WORKSPACES, Workspaces))
#define WORKSPACES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_WORKSPACES, WorkspacesClass))
#define IS_WORKSPACES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_WORKSPACES))
#define IS_WORKSPACES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_WORKSPACES))
#define WORKSPACES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_WORKSPACES, WorkspacesClass))

typedef struct _Workspaces Workspaces;
typedef struct _WorkspacesClass WorkspacesClass;
typedef struct _WorkspacesPrivate WorkspacesPrivate;
enum  {
	WORKSPACES_0_PROPERTY,
	WORKSPACES_NUM_PROPERTIES
};
static GParamSpec* workspaces_properties[WORKSPACES_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _Block2Data Block2Data;
#define _g_main_loop_unref0(var) ((var == NULL) ? NULL : (var = (g_main_loop_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _Block3Data Block3Data;

struct _Workspaces {
	GtkBox parent_instance;
	WorkspacesPrivate * priv;
};

struct _WorkspacesClass {
	GtkBoxClass parent_class;
};

struct _WorkspacesPrivate {
	AstalHyprlandHyprland* _hyprland;
	gint _monitor_id;
	gint _workspaces_per_monitor;
	gint _starting_workspace;
};

struct _Block2Data {
	int _ref_count_;
	Workspaces* self;
	gint index;
	GtkButton* current;
	GMainLoop* loop;
};

struct _Block3Data {
	int _ref_count_;
	Workspaces* self;
	gint workspace_number;
};

static gint Workspaces_private_offset;
static gpointer workspaces_parent_class = NULL;

VALA_EXTERN GType workspaces_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (Workspaces, g_object_unref)
VALA_EXTERN Workspaces* workspaces_new (AstalHyprlandHyprland* hyprland,
                            AstalHyprlandMonitor* monitor);
VALA_EXTERN Workspaces* workspaces_construct (GType object_type,
                                  AstalHyprlandHyprland* hyprland,
                                  AstalHyprlandMonitor* monitor);
static void workspaces_connect_button_to_workspace (Workspaces* self,
                                             GtkButton* button,
                                             gint workspace_number);
static void workspaces_update_workspaces (Workspaces* self);
static void workspaces_setup_workspace_event_handlers (Workspaces* self);
static void workspaces_setup_workspace_scroll (Workspaces* self);
static void _workspaces_update_workspaces_g_object_notify (GObject* _sender,
                                                    GParamSpec* pspec,
                                                    gpointer self);
static void _workspaces_update_workspaces_astal_hyprland_hyprland_client_added (AstalHyprlandHyprland* _sender,
                                                                         AstalHyprlandClient* client,
                                                                         gpointer self);
static void _workspaces_update_workspaces_astal_hyprland_hyprland_client_removed (AstalHyprlandHyprland* _sender,
                                                                           const gchar* address,
                                                                           gpointer self);
static void _workspaces_update_workspaces_astal_hyprland_hyprland_client_moved (AstalHyprlandHyprland* _sender,
                                                                         AstalHyprlandClient* client,
                                                                         AstalHyprlandWorkspace* ws,
                                                                         gpointer self);
static gboolean __lambda7_ (Workspaces* self,
                     gdouble delta_x,
                     gdouble delta_y);
static gboolean ___lambda7__gtk_event_controller_scroll_scroll (GtkEventControllerScroll* _sender,
                                                         gdouble dx,
                                                         gdouble dy,
                                                         gpointer self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void __lambda6_ (Block2Data* _data2_,
                 GObject* source_object,
                 GAsyncResult* res);
static gboolean workspaces_workspace_exists (Workspaces* self,
                                      gint workspace_number);
static void ___lambda6__gasync_ready_callback (GObject* source_object,
                                        GAsyncResult* res,
                                        gpointer self);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void __lambda4_ (Block3Data* _data3_);
static void ___lambda4__gtk_gesture_click_pressed (GtkGestureClick* _sender,
                                            gint n_press,
                                            gdouble x,
                                            gdouble y,
                                            gpointer self);
static void __lambda5_ (Block3Data* _data3_);
static void ___lambda5__gtk_button_clicked (GtkButton* _sender,
                                     gpointer self);
static void workspaces_finalize (GObject * obj);
static GType workspaces_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gssize array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gssize array_length,
                       GDestroyNotify destroy_func);

static inline gpointer
workspaces_get_instance_private (Workspaces* self)
{
	return G_STRUCT_MEMBER_P (self, Workspaces_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 8 "../src/vala/bar/items/Workspaces.vala"
	return self ? g_object_ref (self) : NULL;
#line 164 "Workspaces.c"
}

Workspaces*
workspaces_construct (GType object_type,
                      AstalHyprlandHyprland* hyprland,
                      AstalHyprlandMonitor* monitor)
{
	Workspaces * self = NULL;
	AstalHyprlandHyprland* _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	AstalHyprlandWorkspace* _tmp3_;
	AstalHyprlandWorkspace* _tmp4_;
	gint _tmp5_;
	gint _tmp6_;
#line 7 "../src/vala/bar/items/Workspaces.vala"
	g_return_val_if_fail (hyprland != NULL, NULL);
#line 7 "../src/vala/bar/items/Workspaces.vala"
	g_return_val_if_fail (monitor != NULL, NULL);
#line 7 "../src/vala/bar/items/Workspaces.vala"
	self = (Workspaces*) g_object_new (object_type, NULL);
#line 8 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = _g_object_ref0 (hyprland);
#line 8 "../src/vala/bar/items/Workspaces.vala"
	_g_object_unref0 (self->priv->_hyprland);
#line 8 "../src/vala/bar/items/Workspaces.vala"
	self->priv->_hyprland = _tmp0_;
#line 9 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = astal_hyprland_monitor_get_id (monitor);
#line 9 "../src/vala/bar/items/Workspaces.vala"
	_tmp2_ = _tmp1_;
#line 9 "../src/vala/bar/items/Workspaces.vala"
	self->priv->_monitor_id = _tmp2_;
#line 10 "../src/vala/bar/items/Workspaces.vala"
	self->priv->_workspaces_per_monitor = 10;
#line 11 "../src/vala/bar/items/Workspaces.vala"
	_tmp3_ = astal_hyprland_monitor_get_active_workspace (monitor);
#line 11 "../src/vala/bar/items/Workspaces.vala"
	_tmp4_ = _tmp3_;
#line 11 "../src/vala/bar/items/Workspaces.vala"
	_tmp5_ = astal_hyprland_workspace_get_id (_tmp4_);
#line 11 "../src/vala/bar/items/Workspaces.vala"
	_tmp6_ = _tmp5_;
#line 11 "../src/vala/bar/items/Workspaces.vala"
	self->priv->_starting_workspace = ((_tmp6_ / self->priv->_workspaces_per_monitor) * self->priv->_workspaces_per_monitor) + 1;
#line 210 "Workspaces.c"
	{
		gint i = 0;
#line 13 "../src/vala/bar/items/Workspaces.vala"
		i = self->priv->_starting_workspace;
#line 215 "Workspaces.c"
		{
			gboolean _tmp7_ = FALSE;
#line 13 "../src/vala/bar/items/Workspaces.vala"
			_tmp7_ = TRUE;
#line 13 "../src/vala/bar/items/Workspaces.vala"
			while (TRUE) {
#line 222 "Workspaces.c"
				GtkLabel* label = NULL;
				gchar* _tmp9_;
				gchar* _tmp10_;
				GtkLabel* _tmp11_;
				GtkLabel* _tmp12_;
				GtkLabel* _tmp13_;
				GtkButton* workspace_button = NULL;
				GtkLabel* _tmp14_;
				GtkWidget* _tmp15_;
				GtkButton* _tmp16_ = NULL;
				GtkButton* _tmp17_;
				GtkButton* _tmp18_;
#line 13 "../src/vala/bar/items/Workspaces.vala"
				if (!_tmp7_) {
#line 237 "Workspaces.c"
					gint _tmp8_;
#line 13 "../src/vala/bar/items/Workspaces.vala"
					_tmp8_ = i;
#line 13 "../src/vala/bar/items/Workspaces.vala"
					i = _tmp8_ + 1;
#line 243 "Workspaces.c"
				}
#line 13 "../src/vala/bar/items/Workspaces.vala"
				_tmp7_ = FALSE;
#line 13 "../src/vala/bar/items/Workspaces.vala"
				if (!(i <= ((self->priv->_starting_workspace + self->priv->_workspaces_per_monitor) - 1))) {
#line 13 "../src/vala/bar/items/Workspaces.vala"
					break;
#line 251 "Workspaces.c"
				}
#line 14 "../src/vala/bar/items/Workspaces.vala"
				_tmp9_ = g_strdup_printf ("%i", i % self->priv->_workspaces_per_monitor);
#line 14 "../src/vala/bar/items/Workspaces.vala"
				_tmp10_ = _tmp9_;
#line 14 "../src/vala/bar/items/Workspaces.vala"
				_tmp11_ = (GtkLabel*) gtk_label_new (_tmp10_);
#line 14 "../src/vala/bar/items/Workspaces.vala"
				g_object_ref_sink (_tmp11_);
#line 14 "../src/vala/bar/items/Workspaces.vala"
				_tmp12_ = _tmp11_;
#line 14 "../src/vala/bar/items/Workspaces.vala"
				_g_free0 (_tmp10_);
#line 14 "../src/vala/bar/items/Workspaces.vala"
				label = _tmp12_;
#line 15 "../src/vala/bar/items/Workspaces.vala"
				_tmp13_ = label;
#line 15 "../src/vala/bar/items/Workspaces.vala"
				gtk_label_set_justify (_tmp13_, GTK_JUSTIFY_CENTER);
#line 16 "../src/vala/bar/items/Workspaces.vala"
				_tmp14_ = label;
#line 16 "../src/vala/bar/items/Workspaces.vala"
				_tmp15_ = _g_object_ref0 ((GtkWidget*) _tmp14_);
#line 16 "../src/vala/bar/items/Workspaces.vala"
				_tmp16_ = (GtkButton*) gtk_button_new ();
#line 16 "../src/vala/bar/items/Workspaces.vala"
				gtk_button_set_child (_tmp16_, _tmp15_);
#line 16 "../src/vala/bar/items/Workspaces.vala"
				_g_object_unref0 (_tmp15_);
#line 16 "../src/vala/bar/items/Workspaces.vala"
				g_object_ref_sink (_tmp16_);
#line 16 "../src/vala/bar/items/Workspaces.vala"
				workspace_button = _tmp16_;
#line 19 "../src/vala/bar/items/Workspaces.vala"
				_tmp17_ = workspace_button;
#line 19 "../src/vala/bar/items/Workspaces.vala"
				workspaces_connect_button_to_workspace (self, _tmp17_, i);
#line 20 "../src/vala/bar/items/Workspaces.vala"
				_tmp18_ = workspace_button;
#line 20 "../src/vala/bar/items/Workspaces.vala"
				gtk_box_append ((GtkBox*) self, (GtkWidget*) _tmp18_);
#line 13 "../src/vala/bar/items/Workspaces.vala"
				_g_object_unref0 (workspace_button);
#line 13 "../src/vala/bar/items/Workspaces.vala"
				_g_object_unref0 (label);
#line 297 "Workspaces.c"
			}
		}
	}
#line 23 "../src/vala/bar/items/Workspaces.vala"
	workspaces_update_workspaces (self);
#line 24 "../src/vala/bar/items/Workspaces.vala"
	workspaces_setup_workspace_event_handlers (self);
#line 25 "../src/vala/bar/items/Workspaces.vala"
	workspaces_setup_workspace_scroll (self);
#line 7 "../src/vala/bar/items/Workspaces.vala"
	return self;
#line 309 "Workspaces.c"
}

Workspaces*
workspaces_new (AstalHyprlandHyprland* hyprland,
                AstalHyprlandMonitor* monitor)
{
#line 7 "../src/vala/bar/items/Workspaces.vala"
	return workspaces_construct (TYPE_WORKSPACES, hyprland, monitor);
#line 318 "Workspaces.c"
}

static void
_workspaces_update_workspaces_g_object_notify (GObject* _sender,
                                               GParamSpec* pspec,
                                               gpointer self)
{
#line 29 "../src/vala/bar/items/Workspaces.vala"
	workspaces_update_workspaces ((Workspaces*) self);
#line 328 "Workspaces.c"
}

static void
_workspaces_update_workspaces_astal_hyprland_hyprland_client_added (AstalHyprlandHyprland* _sender,
                                                                    AstalHyprlandClient* client,
                                                                    gpointer self)
{
#line 30 "../src/vala/bar/items/Workspaces.vala"
	workspaces_update_workspaces ((Workspaces*) self);
#line 338 "Workspaces.c"
}

static void
_workspaces_update_workspaces_astal_hyprland_hyprland_client_removed (AstalHyprlandHyprland* _sender,
                                                                      const gchar* address,
                                                                      gpointer self)
{
#line 31 "../src/vala/bar/items/Workspaces.vala"
	workspaces_update_workspaces ((Workspaces*) self);
#line 348 "Workspaces.c"
}

static void
_workspaces_update_workspaces_astal_hyprland_hyprland_client_moved (AstalHyprlandHyprland* _sender,
                                                                    AstalHyprlandClient* client,
                                                                    AstalHyprlandWorkspace* ws,
                                                                    gpointer self)
{
#line 32 "../src/vala/bar/items/Workspaces.vala"
	workspaces_update_workspaces ((Workspaces*) self);
#line 359 "Workspaces.c"
}

static void
workspaces_setup_workspace_event_handlers (Workspaces* self)
{
	AstalHyprlandHyprland* _tmp0_;
	AstalHyprlandHyprland* _tmp1_;
	AstalHyprlandHyprland* _tmp2_;
	AstalHyprlandHyprland* _tmp3_;
#line 28 "../src/vala/bar/items/Workspaces.vala"
	g_return_if_fail (self != NULL);
#line 29 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = self->priv->_hyprland;
#line 29 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_object ((GObject*) _tmp0_, "notify::focused-workspace", (GCallback) _workspaces_update_workspaces_g_object_notify, self, 0);
#line 30 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = self->priv->_hyprland;
#line 30 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_object (_tmp1_, "client-added", (GCallback) _workspaces_update_workspaces_astal_hyprland_hyprland_client_added, self, 0);
#line 31 "../src/vala/bar/items/Workspaces.vala"
	_tmp2_ = self->priv->_hyprland;
#line 31 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_object (_tmp2_, "client-removed", (GCallback) _workspaces_update_workspaces_astal_hyprland_hyprland_client_removed, self, 0);
#line 32 "../src/vala/bar/items/Workspaces.vala"
	_tmp3_ = self->priv->_hyprland;
#line 32 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_object (_tmp3_, "client-moved", (GCallback) _workspaces_update_workspaces_astal_hyprland_hyprland_client_moved, self, 0);
#line 387 "Workspaces.c"
}

static gboolean
__lambda7_ (Workspaces* self,
            gdouble delta_x,
            gdouble delta_y)
{
	const gchar* _tmp0_ = NULL;
	gchar* direction = NULL;
	gchar* _tmp1_;
	AstalHyprlandHyprland* _tmp2_;
	gboolean result;
#line 39 "../src/vala/bar/items/Workspaces.vala"
	if (delta_y > ((gdouble) 0)) {
#line 39 "../src/vala/bar/items/Workspaces.vala"
		_tmp0_ = "e-1";
#line 404 "Workspaces.c"
	} else {
#line 39 "../src/vala/bar/items/Workspaces.vala"
		_tmp0_ = "e+1";
#line 408 "Workspaces.c"
	}
#line 39 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 39 "../src/vala/bar/items/Workspaces.vala"
	direction = _tmp1_;
#line 40 "../src/vala/bar/items/Workspaces.vala"
	_tmp2_ = self->priv->_hyprland;
#line 40 "../src/vala/bar/items/Workspaces.vala"
	astal_hyprland_hyprland_dispatch (_tmp2_, "workspace", direction);
#line 41 "../src/vala/bar/items/Workspaces.vala"
	result = TRUE;
#line 41 "../src/vala/bar/items/Workspaces.vala"
	_g_free0 (direction);
#line 41 "../src/vala/bar/items/Workspaces.vala"
	return result;
#line 424 "Workspaces.c"
}

static gboolean
___lambda7__gtk_event_controller_scroll_scroll (GtkEventControllerScroll* _sender,
                                                gdouble dx,
                                                gdouble dy,
                                                gpointer self)
{
	gboolean result;
	result = __lambda7_ ((Workspaces*) self, dx, dy);
#line 38 "../src/vala/bar/items/Workspaces.vala"
	return result;
#line 437 "Workspaces.c"
}

static void
workspaces_setup_workspace_scroll (Workspaces* self)
{
	GtkEventControllerScroll* scroll_controller = NULL;
	GtkEventControllerScroll* _tmp0_;
	GtkEventController* _tmp1_;
#line 35 "../src/vala/bar/items/Workspaces.vala"
	g_return_if_fail (self != NULL);
#line 36 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = (GtkEventControllerScroll*) gtk_event_controller_scroll_new (GTK_EVENT_CONTROLLER_SCROLL_VERTICAL);
#line 36 "../src/vala/bar/items/Workspaces.vala"
	scroll_controller = _tmp0_;
#line 38 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_object (scroll_controller, "scroll", (GCallback) ___lambda7__gtk_event_controller_scroll_scroll, self, 0);
#line 43 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = _g_object_ref0 ((GtkEventController*) scroll_controller);
#line 43 "../src/vala/bar/items/Workspaces.vala"
	gtk_widget_add_controller ((GtkWidget*) self, _tmp1_);
#line 35 "../src/vala/bar/items/Workspaces.vala"
	_g_object_unref0 (scroll_controller);
#line 460 "Workspaces.c"
}

static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
#line 46 "../src/vala/bar/items/Workspaces.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 46 "../src/vala/bar/items/Workspaces.vala"
	return _data2_;
#line 470 "Workspaces.c"
}

static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 46 "../src/vala/bar/items/Workspaces.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 480 "Workspaces.c"
		Workspaces* self;
#line 46 "../src/vala/bar/items/Workspaces.vala"
		self = _data2_->self;
#line 46 "../src/vala/bar/items/Workspaces.vala"
		_g_main_loop_unref0 (_data2_->loop);
#line 46 "../src/vala/bar/items/Workspaces.vala"
		_g_object_unref0 (_data2_->current);
#line 46 "../src/vala/bar/items/Workspaces.vala"
		_g_object_unref0 (self);
#line 46 "../src/vala/bar/items/Workspaces.vala"
		g_slice_free (Block2Data, _data2_);
#line 492 "Workspaces.c"
	}
}

static void
__lambda6_ (Block2Data* _data2_,
            GObject* source_object,
            GAsyncResult* res)
{
	Workspaces* self;
	GError* _inner_error0_ = NULL;
#line 51 "../src/vala/bar/items/Workspaces.vala"
	self = _data2_->self;
#line 51 "../src/vala/bar/items/Workspaces.vala"
	g_return_if_fail (res != NULL);
#line 507 "Workspaces.c"
	{
		AstalHyprlandHyprland* _tmp0_;
#line 53 "../src/vala/bar/items/Workspaces.vala"
		_tmp0_ = self->priv->_hyprland;
#line 53 "../src/vala/bar/items/Workspaces.vala"
		astal_hyprland_hyprland_sync_monitors_finish (_tmp0_, res, &_inner_error0_);
#line 53 "../src/vala/bar/items/Workspaces.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 516 "Workspaces.c"
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		FILE* _tmp1_;
		GError* _tmp2_;
		const gchar* _tmp3_;
#line 52 "../src/vala/bar/items/Workspaces.vala"
		e = _inner_error0_;
#line 52 "../src/vala/bar/items/Workspaces.vala"
		_inner_error0_ = NULL;
#line 55 "../src/vala/bar/items/Workspaces.vala"
		_tmp1_ = stderr;
#line 55 "../src/vala/bar/items/Workspaces.vala"
		_tmp2_ = e;
#line 55 "../src/vala/bar/items/Workspaces.vala"
		_tmp3_ = _tmp2_->message;
#line 55 "../src/vala/bar/items/Workspaces.vala"
		fprintf (_tmp1_, "Error during sync_monitors: %s\n", _tmp3_);
#line 52 "../src/vala/bar/items/Workspaces.vala"
		_g_error_free0 (e);
#line 541 "Workspaces.c"
	}
	__finally0:
	{
		GError* _inner_error1_ = NULL;
		AstalHyprlandMonitor* monitor = NULL;
		AstalHyprlandHyprland* _tmp4_;
		AstalHyprlandMonitor* _tmp5_;
		gint focused_workspace_id = 0;
		AstalHyprlandMonitor* _tmp6_;
		AstalHyprlandWorkspace* _tmp7_;
		AstalHyprlandWorkspace* _tmp8_;
		gint _tmp9_;
		gint _tmp10_;
#line 57 "../src/vala/bar/items/Workspaces.vala"
		_tmp4_ = self->priv->_hyprland;
#line 57 "../src/vala/bar/items/Workspaces.vala"
		_tmp5_ = astal_hyprland_hyprland_get_monitor (_tmp4_, self->priv->_monitor_id);
#line 57 "../src/vala/bar/items/Workspaces.vala"
		monitor = _tmp5_;
#line 58 "../src/vala/bar/items/Workspaces.vala"
		_tmp6_ = monitor;
#line 58 "../src/vala/bar/items/Workspaces.vala"
		_tmp7_ = astal_hyprland_monitor_get_active_workspace (_tmp6_);
#line 58 "../src/vala/bar/items/Workspaces.vala"
		_tmp8_ = _tmp7_;
#line 58 "../src/vala/bar/items/Workspaces.vala"
		_tmp9_ = astal_hyprland_workspace_get_id (_tmp8_);
#line 58 "../src/vala/bar/items/Workspaces.vala"
		_tmp10_ = _tmp9_;
#line 58 "../src/vala/bar/items/Workspaces.vala"
		focused_workspace_id = _tmp10_;
#line 60 "../src/vala/bar/items/Workspaces.vala"
		while (TRUE) {
#line 575 "Workspaces.c"
			GtkWidget* _tmp20_;
			GtkButton* _tmp21_;
			gint _tmp22_;
#line 60 "../src/vala/bar/items/Workspaces.vala"
			if (!(_data2_->current != NULL)) {
#line 60 "../src/vala/bar/items/Workspaces.vala"
				break;
#line 583 "Workspaces.c"
			}
#line 61 "../src/vala/bar/items/Workspaces.vala"
			if ((self->priv->_starting_workspace + _data2_->index) == focused_workspace_id) {
#line 587 "Workspaces.c"
				gchar* _tmp11_;
				gchar** _tmp12_;
				gchar** _tmp13_;
				gint _tmp13__length1;
#line 62 "../src/vala/bar/items/Workspaces.vala"
				_tmp11_ = g_strdup ("focused");
#line 62 "../src/vala/bar/items/Workspaces.vala"
				_tmp12_ = g_new0 (gchar*, 1 + 1);
#line 62 "../src/vala/bar/items/Workspaces.vala"
				_tmp12_[0] = _tmp11_;
#line 62 "../src/vala/bar/items/Workspaces.vala"
				_tmp13_ = _tmp12_;
#line 62 "../src/vala/bar/items/Workspaces.vala"
				_tmp13__length1 = 1;
#line 62 "../src/vala/bar/items/Workspaces.vala"
				gtk_widget_set_css_classes ((GtkWidget*) _data2_->current, _tmp13_);
#line 62 "../src/vala/bar/items/Workspaces.vala"
				_tmp13_ = (_vala_array_free (_tmp13_, _tmp13__length1, (GDestroyNotify) g_free), NULL);
#line 606 "Workspaces.c"
			} else {
#line 63 "../src/vala/bar/items/Workspaces.vala"
				if (workspaces_workspace_exists (self, self->priv->_starting_workspace + _data2_->index)) {
#line 610 "Workspaces.c"
					gchar* _tmp14_;
					gchar** _tmp15_;
					gchar** _tmp16_;
					gint _tmp16__length1;
#line 64 "../src/vala/bar/items/Workspaces.vala"
					_tmp14_ = g_strdup ("occupied");
#line 64 "../src/vala/bar/items/Workspaces.vala"
					_tmp15_ = g_new0 (gchar*, 1 + 1);
#line 64 "../src/vala/bar/items/Workspaces.vala"
					_tmp15_[0] = _tmp14_;
#line 64 "../src/vala/bar/items/Workspaces.vala"
					_tmp16_ = _tmp15_;
#line 64 "../src/vala/bar/items/Workspaces.vala"
					_tmp16__length1 = 1;
#line 64 "../src/vala/bar/items/Workspaces.vala"
					gtk_widget_set_css_classes ((GtkWidget*) _data2_->current, _tmp16_);
#line 64 "../src/vala/bar/items/Workspaces.vala"
					_tmp16_ = (_vala_array_free (_tmp16_, _tmp16__length1, (GDestroyNotify) g_free), NULL);
#line 629 "Workspaces.c"
				} else {
					gchar* _tmp17_;
					gchar** _tmp18_;
					gchar** _tmp19_;
					gint _tmp19__length1;
#line 66 "../src/vala/bar/items/Workspaces.vala"
					_tmp17_ = g_strdup ("empty");
#line 66 "../src/vala/bar/items/Workspaces.vala"
					_tmp18_ = g_new0 (gchar*, 1 + 1);
#line 66 "../src/vala/bar/items/Workspaces.vala"
					_tmp18_[0] = _tmp17_;
#line 66 "../src/vala/bar/items/Workspaces.vala"
					_tmp19_ = _tmp18_;
#line 66 "../src/vala/bar/items/Workspaces.vala"
					_tmp19__length1 = 1;
#line 66 "../src/vala/bar/items/Workspaces.vala"
					gtk_widget_set_css_classes ((GtkWidget*) _data2_->current, _tmp19_);
#line 66 "../src/vala/bar/items/Workspaces.vala"
					_tmp19_ = (_vala_array_free (_tmp19_, _tmp19__length1, (GDestroyNotify) g_free), NULL);
#line 649 "Workspaces.c"
				}
			}
#line 68 "../src/vala/bar/items/Workspaces.vala"
			_tmp20_ = gtk_widget_get_next_sibling ((GtkWidget*) _data2_->current);
#line 68 "../src/vala/bar/items/Workspaces.vala"
			_tmp21_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, gtk_button_get_type (), GtkButton));
#line 68 "../src/vala/bar/items/Workspaces.vala"
			_g_object_unref0 (_data2_->current);
#line 68 "../src/vala/bar/items/Workspaces.vala"
			_data2_->current = _tmp21_;
#line 69 "../src/vala/bar/items/Workspaces.vala"
			_tmp22_ = _data2_->index;
#line 69 "../src/vala/bar/items/Workspaces.vala"
			_data2_->index = _tmp22_ + 1;
#line 664 "Workspaces.c"
		}
#line 71 "../src/vala/bar/items/Workspaces.vala"
		g_main_loop_quit (_data2_->loop);
#line 52 "../src/vala/bar/items/Workspaces.vala"
		_g_object_unref0 (monitor);
#line 670 "Workspaces.c"
	}
#line 52 "../src/vala/bar/items/Workspaces.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 52 "../src/vala/bar/items/Workspaces.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 52 "../src/vala/bar/items/Workspaces.vala"
		g_clear_error (&_inner_error0_);
#line 52 "../src/vala/bar/items/Workspaces.vala"
		return;
#line 680 "Workspaces.c"
	}
}

static void
___lambda6__gasync_ready_callback (GObject* source_object,
                                   GAsyncResult* res,
                                   gpointer self)
{
#line 51 "../src/vala/bar/items/Workspaces.vala"
	__lambda6_ (self, source_object, res);
#line 51 "../src/vala/bar/items/Workspaces.vala"
	block2_data_unref (self);
#line 693 "Workspaces.c"
}

static void
workspaces_update_workspaces (Workspaces* self)
{
	Block2Data* _data2_;
	GtkWidget* _tmp0_;
	GtkButton* _tmp1_;
	GMainLoop* _tmp2_;
	AstalHyprlandHyprland* _tmp3_;
#line 46 "../src/vala/bar/items/Workspaces.vala"
	g_return_if_fail (self != NULL);
#line 46 "../src/vala/bar/items/Workspaces.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 46 "../src/vala/bar/items/Workspaces.vala"
	_data2_->_ref_count_ = 1;
#line 46 "../src/vala/bar/items/Workspaces.vala"
	_data2_->self = g_object_ref (self);
#line 47 "../src/vala/bar/items/Workspaces.vala"
	_data2_->index = 0;
#line 48 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = gtk_widget_get_first_child ((GtkWidget*) self);
#line 48 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_button_get_type (), GtkButton));
#line 48 "../src/vala/bar/items/Workspaces.vala"
	_data2_->current = _tmp1_;
#line 50 "../src/vala/bar/items/Workspaces.vala"
	_tmp2_ = g_main_loop_new (NULL, FALSE);
#line 50 "../src/vala/bar/items/Workspaces.vala"
	_data2_->loop = _tmp2_;
#line 51 "../src/vala/bar/items/Workspaces.vala"
	_tmp3_ = self->priv->_hyprland;
#line 51 "../src/vala/bar/items/Workspaces.vala"
	astal_hyprland_hyprland_sync_monitors (_tmp3_, ___lambda6__gasync_ready_callback, block2_data_ref (_data2_));
#line 46 "../src/vala/bar/items/Workspaces.vala"
	block2_data_unref (_data2_);
#line 46 "../src/vala/bar/items/Workspaces.vala"
	_data2_ = NULL;
#line 732 "Workspaces.c"
}

static Block3Data*
block3_data_ref (Block3Data* _data3_)
{
#line 76 "../src/vala/bar/items/Workspaces.vala"
	g_atomic_int_inc (&_data3_->_ref_count_);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	return _data3_;
#line 742 "Workspaces.c"
}

static void
block3_data_unref (void * _userdata_)
{
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
#line 76 "../src/vala/bar/items/Workspaces.vala"
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
#line 752 "Workspaces.c"
		Workspaces* self;
#line 76 "../src/vala/bar/items/Workspaces.vala"
		self = _data3_->self;
#line 76 "../src/vala/bar/items/Workspaces.vala"
		_g_object_unref0 (self);
#line 76 "../src/vala/bar/items/Workspaces.vala"
		g_slice_free (Block3Data, _data3_);
#line 760 "Workspaces.c"
	}
}

static void
__lambda4_ (Block3Data* _data3_)
{
	Workspaces* self;
	AstalHyprlandHyprland* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
#line 81 "../src/vala/bar/items/Workspaces.vala"
	self = _data3_->self;
#line 82 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = self->priv->_hyprland;
#line 82 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = g_strdup_printf ("%i", _data3_->workspace_number);
#line 82 "../src/vala/bar/items/Workspaces.vala"
	_tmp2_ = _tmp1_;
#line 82 "../src/vala/bar/items/Workspaces.vala"
	astal_hyprland_hyprland_dispatch (_tmp0_, "movetoworkspacesilent", _tmp2_);
#line 82 "../src/vala/bar/items/Workspaces.vala"
	_g_free0 (_tmp2_);
#line 783 "Workspaces.c"
}

static void
___lambda4__gtk_gesture_click_pressed (GtkGestureClick* _sender,
                                       gint n_press,
                                       gdouble x,
                                       gdouble y,
                                       gpointer self)
{
#line 81 "../src/vala/bar/items/Workspaces.vala"
	__lambda4_ (self);
#line 795 "Workspaces.c"
}

static void
__lambda5_ (Block3Data* _data3_)
{
	Workspaces* self;
	AstalHyprlandHyprland* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
#line 85 "../src/vala/bar/items/Workspaces.vala"
	self = _data3_->self;
#line 86 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = self->priv->_hyprland;
#line 86 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = g_strdup_printf ("%i", _data3_->workspace_number);
#line 86 "../src/vala/bar/items/Workspaces.vala"
	_tmp2_ = _tmp1_;
#line 86 "../src/vala/bar/items/Workspaces.vala"
	astal_hyprland_hyprland_dispatch (_tmp0_, "workspace", _tmp2_);
#line 86 "../src/vala/bar/items/Workspaces.vala"
	_g_free0 (_tmp2_);
#line 817 "Workspaces.c"
}

static void
___lambda5__gtk_button_clicked (GtkButton* _sender,
                                gpointer self)
{
#line 85 "../src/vala/bar/items/Workspaces.vala"
	__lambda5_ (self);
#line 826 "Workspaces.c"
}

static void
workspaces_connect_button_to_workspace (Workspaces* self,
                                        GtkButton* button,
                                        gint workspace_number)
{
	Block3Data* _data3_;
	GtkGestureClick* middle_click = NULL;
	GtkGestureClick* _tmp0_ = NULL;
	GtkEventController* _tmp1_;
#line 76 "../src/vala/bar/items/Workspaces.vala"
	g_return_if_fail (self != NULL);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	g_return_if_fail (button != NULL);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	_data3_ = g_slice_new0 (Block3Data);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	_data3_->_ref_count_ = 1;
#line 76 "../src/vala/bar/items/Workspaces.vala"
	_data3_->self = g_object_ref (self);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	_data3_->workspace_number = workspace_number;
#line 77 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = (GtkGestureClick*) gtk_gesture_click_new ();
#line 77 "../src/vala/bar/items/Workspaces.vala"
	gtk_gesture_single_set_button ((GtkGestureSingle*) _tmp0_, (guint) GDK_BUTTON_MIDDLE);
#line 77 "../src/vala/bar/items/Workspaces.vala"
	middle_click = _tmp0_;
#line 81 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_data (middle_click, "pressed", (GCallback) ___lambda4__gtk_gesture_click_pressed, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
#line 84 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = _g_object_ref0 ((GtkEventController*) middle_click);
#line 84 "../src/vala/bar/items/Workspaces.vala"
	gtk_widget_add_controller ((GtkWidget*) button, _tmp1_);
#line 85 "../src/vala/bar/items/Workspaces.vala"
	g_signal_connect_data (button, "clicked", (GCallback) ___lambda5__gtk_button_clicked, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	_g_object_unref0 (middle_click);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	block3_data_unref (_data3_);
#line 76 "../src/vala/bar/items/Workspaces.vala"
	_data3_ = NULL;
#line 870 "Workspaces.c"
}

static gboolean
workspaces_workspace_exists (Workspaces* self,
                             gint workspace_number)
{
	AstalHyprlandWorkspace* workspace = NULL;
	AstalHyprlandHyprland* _tmp0_;
	AstalHyprlandWorkspace* _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	AstalHyprlandWorkspace* _tmp4_;
	gboolean result;
#line 90 "../src/vala/bar/items/Workspaces.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 91 "../src/vala/bar/items/Workspaces.vala"
	_tmp0_ = self->priv->_hyprland;
#line 91 "../src/vala/bar/items/Workspaces.vala"
	_tmp1_ = astal_hyprland_hyprland_get_workspace (_tmp0_, workspace_number);
#line 91 "../src/vala/bar/items/Workspaces.vala"
	workspace = _tmp1_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
	_tmp4_ = workspace;
#line 93 "../src/vala/bar/items/Workspaces.vala"
	if (_tmp4_ != NULL) {
#line 896 "Workspaces.c"
		AstalHyprlandWorkspace* _tmp5_;
		GList* _tmp6_;
		GList* _tmp7_;
		GList* _tmp8_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp5_ = workspace;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp6_ = astal_hyprland_workspace_get_clients (_tmp5_);
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp7_ = _tmp6_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp8_ = _tmp7_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp3_ = _tmp8_ != NULL;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		(_tmp8_ == NULL) ? NULL : (_tmp8_ = (g_list_free (_tmp8_), NULL));
#line 913 "Workspaces.c"
	} else {
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp3_ = FALSE;
#line 917 "Workspaces.c"
	}
#line 93 "../src/vala/bar/items/Workspaces.vala"
	if (_tmp3_) {
#line 921 "Workspaces.c"
		AstalHyprlandWorkspace* _tmp9_;
		GList* _tmp10_;
		GList* _tmp11_;
		GList* _tmp12_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp9_ = workspace;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp10_ = astal_hyprland_workspace_get_clients (_tmp9_);
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp11_ = _tmp10_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp12_ = _tmp11_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp2_ = g_list_length (_tmp12_) > ((guint) 0);
#line 93 "../src/vala/bar/items/Workspaces.vala"
		(_tmp12_ == NULL) ? NULL : (_tmp12_ = (g_list_free (_tmp12_), NULL));
#line 938 "Workspaces.c"
	} else {
#line 93 "../src/vala/bar/items/Workspaces.vala"
		_tmp2_ = FALSE;
#line 942 "Workspaces.c"
	}
#line 93 "../src/vala/bar/items/Workspaces.vala"
	result = _tmp2_;
#line 93 "../src/vala/bar/items/Workspaces.vala"
	_g_object_unref0 (workspace);
#line 93 "../src/vala/bar/items/Workspaces.vala"
	return result;
#line 950 "Workspaces.c"
}

static void
workspaces_class_init (WorkspacesClass * klass,
                       gpointer klass_data)
{
#line 1 "../src/vala/bar/items/Workspaces.vala"
	workspaces_parent_class = g_type_class_peek_parent (klass);
#line 1 "../src/vala/bar/items/Workspaces.vala"
	g_type_class_adjust_private_offset (klass, &Workspaces_private_offset);
#line 1 "../src/vala/bar/items/Workspaces.vala"
	G_OBJECT_CLASS (klass)->finalize = workspaces_finalize;
#line 963 "Workspaces.c"
}

static void
workspaces_instance_init (Workspaces * self,
                          gpointer klass)
{
#line 1 "../src/vala/bar/items/Workspaces.vala"
	self->priv = workspaces_get_instance_private (self);
#line 972 "Workspaces.c"
}

static void
workspaces_finalize (GObject * obj)
{
	Workspaces * self;
#line 1 "../src/vala/bar/items/Workspaces.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_WORKSPACES, Workspaces);
#line 2 "../src/vala/bar/items/Workspaces.vala"
	_g_object_unref0 (self->priv->_hyprland);
#line 1 "../src/vala/bar/items/Workspaces.vala"
	G_OBJECT_CLASS (workspaces_parent_class)->finalize (obj);
#line 985 "Workspaces.c"
}

static GType
workspaces_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (WorkspacesClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) workspaces_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (Workspaces), 0, (GInstanceInitFunc) workspaces_instance_init, NULL };
	GType workspaces_type_id;
	workspaces_type_id = g_type_register_static (gtk_box_get_type (), "Workspaces", &g_define_type_info, 0);
	Workspaces_private_offset = g_type_add_instance_private (workspaces_type_id, sizeof (WorkspacesPrivate));
	return workspaces_type_id;
}

GType
workspaces_get_type (void)
{
	static volatile gsize workspaces_type_id__once = 0;
	if (g_once_init_enter (&workspaces_type_id__once)) {
		GType workspaces_type_id;
		workspaces_type_id = workspaces_get_type_once ();
		g_once_init_leave (&workspaces_type_id__once, workspaces_type_id);
	}
	return workspaces_type_id__once;
}

static void
_vala_array_destroy (gpointer array,
                     gssize array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gssize i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gssize array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

